<!DOCTYPE html>
<html lang="en">
<head>
    <title>Home Listings - J&B Real Estate Partners</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script scr="js\script.js"></script>
    <link rel="stylesheet" href="css\style.css">
    <script>
        var btn = document.getElementById("btn");
        var listingCont = document.getElementById("listing-cont");
        const url = "http://3.21.225.172:8080/api/realestate/getByRowAmount?rows=5";
        const urlShort = "http://3.21.225.172:8080/api/";
        function requestListings() {
            console.log("hello1");
            var ourRequest = new XMLHttpRequest();
            ourRequest.open('GET', url)
            ourRequest.onload =
                function () {
                    console.log("hello2");
                    var ourData = JSON.parse(ourRequest.responseText);
                    renderHTML(ourData);
                };
            ourRequest.send();
        }
        function updateData() {
            var record_count;
            record_count = parseInt(document.getElementById("num_rec").value);
        }
        function renderHTML(data) {
            var htmlString = "";
            for (i = 0; i < data.length; i++) {
                htmlString += "<p>" + data[i].price + "</p><br>";
                console.log(htmlString);

               /* $("listing-cont").html(htmlString).appendTo("#test");*/
            }
            document.getElementById("test").innerHTML = htmlString;
                 $.each(data, function (i, item) {
                     var html =
                         "<td>" + item.fname + "</td>"
                         "<td>" + item.lname + "</td>"
                         "<td>" + item.yrblt + "</td>"
                         "<td>" + item.isnew + "</td>"
                         "<td>" + item.sqft + "</td>"
                         "<td>" + item.baths + "</td>"
                         "<td>" + item.beds + "</td>"
                         "<td>" + item.street + "</td>"
                         "<td>" + item.city + "</td>"
                         "<td>" + item.state + "</td>"
                         "<td>" + item.zip + "</td>"
                         "<td>" + item.state + "</td>"
                         "<td>" + item.phone + "</td>"
                         "<td>" + item.price + "</td>"
                         "<td>img width=100 height=100 src='" + urlShort + item.imageurl + "'/></td>";
                     $("<tr/>").html(html).appendTo("#records");
                 });
        };
        updateData();
    </script>
</head>
<body>

<!--Navigation Bar-->
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="index.html">J & B Real Estate</a>
        </div>
        <ul class="nav navbar-nav">
            <li><a href="index.html">Home</a></li>
            <li class="active"><a href="#">Listings</a></li>
            <li><a href="connect.html">Connect</a></li>
            <li><a href="about.html">About Us</a></li>
        </ul>
    </div>
</nav>

<!--Page title-->
<div class="background jumbotron jumbotron-fluid text-center">
    <div class="transbox">
        <h1>Real Estate Listings</h1>
        <h3>Johnson & Burns Real Estate</h3>
    </div>
</div>

<!--main content-->
<div class="container-fluid main display-4">
    <button onclick="requestListings()" id="btn">Home Listings</button>
        <div id="listing-cont" class="container">
            <p id="test"></p>
            <table id="records">
                <tr>
                    <td>First Name</td>
                    <td>Last Name</td>
                    <td>Year Built</td>
                    <td>New Build</td>
                    <td>Square Ft.</td>
                    <td>Baths</td>
                    <td>Beds</td>
                    <td>Street</td>
                    <td>City</td>
                    <td>State</td>
                    <td>Zip</td>
                    <td>Phone</td>
                    <td>Price</td>
                    <td>Image</td>
                </tr>
            </table>
        </div>
</div>

<!--footer-->

    <footer>Johnson & Burns Proud Partners in Real Estate since &copy 2021</footer>

</body>
</html>